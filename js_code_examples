
var orakul = orakul || {};

orakul.utility  = (function(){

    function load(src, options) {
        if(typeof(src)==="string") {
            var script=document.createElement('script');
            script.type='text/javascript';
            script.async=true;
            script.charset='UTF-8';
            script.src=src;
            if (options && options.cb) {

                script.onload = script.onerror = function() {
                    if (!this.executed) { // execute only 1 time
                        this.executed = true;
                        options.cb();
                    }
                };

                script.onreadystatechange = function() {
                    var self = this;
                    if (this.readyState == "complete" || this.readyState == "loaded") {
                        setTimeout(function() {
                            self.onload()
                        }, 0); // save "this" for onload
                    }
                };

            }
            document.body.appendChild(script);
        }
    }

    function loadImageCounter(src){
        if(typeof(src)==="string") {
            var newImg = new Image;
            newImg.width = 0, newImg.height = 0, newImg.border = 0;
            newImg.src = src + ((src.indexOf('?') === -1) ? '?randORAKUL=' : '&randORAKUL=')+(new Date().getTime())+(Math.floor((Math.random() * 1000) + 1));
            $('#after-footer').append(newImg);
        }
    }

    function cookie(key, value, options) {
        // Write
        if (value !== undefined) {
            if (typeof options.expires === 'number') {
                var days = options.expires, t = options.expires = new Date();
                t.setTime(+t + days * 864e+5);
            }
            return (document.cookie = [
                encodeURIComponent(key), '=', encodeURIComponent(value),
                options.expires ? '; expires=' + options.expires.toUTCString() : '',
                options.path    ? '; path=' + options.path : '',
                options.domain  ? '; domain=' + options.domain : '',
                options.secure  ? '; secure' : ''
            ].join(''));
        }
        // Read
        var result = key ? undefined : {};
        var cookies = document.cookie ? document.cookie.split(';') : [];
        for (var i = 0, l = cookies.length; i < l; i++) {
            var parts = cookies[i].replace(/^\s+|\s+$/g,"").split('=');
            var name = decodeURIComponent(parts.shift());
            var cookie = parts.join('=');
            if (key && key === name) {
                result = decodeURIComponent(cookie);
                break;
            }
        }
        return result;
    }

    function click_count(market_id) {//console.log(market_id);
        if(market_id) {
            load('//orakul.ua/mod/counter.php?type=2&id='+market_id+'&rnd='+(+new Date));
        }
    }

    function random (min, max) {
        if (max == null) {
            max = min;
            min = 0;
        }
        return min + Math.floor(Math.random() * (max - min + 1));
    }
    function shuffle (obj) {
        var length = obj.length, shuffled = Array(length);
        for (var index = 0, rand; index < length; index++) {
            rand = random(0, index);
            if (rand !== index) shuffled[index] = shuffled[rand];
            shuffled[rand] = obj[index];
        }
        return shuffled;
    }

    function getURLParameter(param) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');
            if (sParameterName[0] === param) {
                return sParameterName[1];
            }
        }
    }

    return {
        load: load,
        loadImageCounter: loadImageCounter,
        cookie: cookie,
        click_count: click_count,
        random: random,
        shuffle: shuffle,
        getURLParameter: getURLParameter
    }
})();

orakul.dateChooser = (function(){

    function loadCarouselData(){
        var yearsBox = '', yearsList = '',
            daysBox = '', daysList = '',
            monthBox = '', monthList = '',
            currentYear = new Date().getFullYear(),
            ie89 = (isIE() && isIE()<10)?true : false;

        for(var i = 1915; i<=currentYear; i++){
            yearsBox += '<div'+((ie89)?' data-content="'+i+'"':'')+'>'+i+'</div>';
            yearsList = '<li>'+i+'</li>'+yearsList;
            yearOption = '<option value="'+i+'">'+i+'</option>'+yearsList;
        }
        for(var i = 1; i<=31; i++){
            daysBox += '<div'+((ie89)?' data-content="'+((i<10)?('0'+i):i)+'"':'')+'>'+((i<10)?('0'+i):i)+'</div>';
            daysList += '<li>'+((i<10)?('0'+i):i)+'</li>';
        }

        for(var i = 1; i<=12; i++){
            monthBox += '<div'+((ie89)?' data-content="'+orakul.lang.MMMM[((i<10)?('0'+i):i)]+'"':'')+'>'+orakul.lang.MMMM[((i<10)?('0'+i):i)]+'</div>';
            monthList += '<li>'+orakul.lang.MMMM[((i<10)?('0'+i):i)]+'</li>';
            if(i===6) monthList += '</ul><ul>';
        }

        $('.choose-sign-day').html(daysBox);
        $('#day-box').prepend('<ul>'+daysList+'</ul>');
        $('.choose-sign-year').html(yearsBox);
        $('#year-box').prepend('<ul>'+yearsList+'</ul>');
        $('.choose-sign-month').html(monthBox);
        $('#month-box').prepend('<ul>'+monthList+'</ul>');

    }

    function addDate(date) {//console.log(currentDate);
        var owl = $('.owl-carousel');
        var currentDate = date || '', pref = '';
        if(currentDate === '') {
            $.each(owl, function (index, value) {
                var self = this;
                var valIndex = $(self).data('owlCarousel').current();
                var val = $(self).find(".owl-item").eq(valIndex).find("div").html();
                currentDate = ((index === 1) ? ((valIndex + 1 < 10) ? '0' + (valIndex + 1) : valIndex + 1) : val) + pref + currentDate;
                pref = '-';
            });
        }

        var dates = writeCheckedDate(currentDate);

        //orakul.utility.cookie('dates', '',{expires: 0, path: orakul.globals.COOKIE_DOMAIN});

        orakul.utility.cookie('dates', dates, {expires: 365, domain: orakul.globals.COOKIE_DOMAIN, path: '/'});
        if(date != '')showNewDates(orakul.utility.cookie('dates'));

        return currentDate;
    }

    function removeDate(date) {
        var currentDate = date || '', pref = '';

        var dates = orakul.utility.cookie('dates') ? orakul.utility.cookie('dates').split(",") : [];
        $.each(dates, function (index, value) {
            if (value === date) dates.splice(index, 1);
        });
        dates.join(',');

        orakul.utility.cookie('dates', dates, {expires: 365, domain: orakul.globals.COOKIE_DOMAIN, path: '/'});
        showNewDates(orakul.utility.cookie('dates'));

    }

    function writeCheckedDate(cur){
        var maxLength = 6;
        var dates = orakul.utility.cookie('dates') ? orakul.utility.cookie('dates').split(",") : [];
        $.each(dates, function (index, value) {
            if (value === cur) dates.splice(index, 1);
        });
        if (dates.length + 1 > maxLength)dates.splice(0, 1);
        dates.push(cur);
        dates.join(',');

        return dates;
    }

    function showNewDates(dates){
        /* var datesLinks = dates.split(","), datesHTML = '', newDate='';
         $.each(datesLinks, function(index, value){
         var self = this;
         newDate = formatDate(self,orakul.lang.dateFormat);
         datesHTML += '<a href="#" id="'+value+'">'+newDate+'</a> ';
         });
         $('#choosenDates').html(datesHTML);*/
        var link = $('#choosenDates').data('link');
        var url = orakul.globals.SITE_URI+link;//console.log(url);
        if(dates !== '') {
            $.ajax({cache:false,url:url}).done(function (data) {//alert(url+'----'+(orakul.utility.cookie('dates'))+'==='+data);
                $('#choosenDates').html(data);
            });
        }else{
            $('#choosenDates').html('');
        }
    }

    function chooseDateOnWheel(date){
        var owlBlock = $('.owl-carousel');
        var dateElements = date.split('-').reverse();
        $.each(owlBlock, function (index, value) {
            var self = this;
            var elToNum = parseInt(dateElements[index]);
            var elNum = (index===0)?(elToNum-1910):(elToNum-1);
            $(self).data('owlCarousel').current(elNum);
            $(self).data('owlCarousel').refresh();
        });

    }

    function formatDate(dates, format){
        var newDate = '', dateItems = dates.split('-'), dateNumber = dateItems[0], dateMonth = dateItems[1], dateYear = dateItems[2];
        newDate = format.replace('{d}', dateNumber).replace('{m}', orakul.lang.MMM[dateMonth]).replace('{y}',dateYear);
        return newDate;
    }

    function parseCurrentDate(dates, part){
        var currentDate = '';
        if(dates) {
            var datesArray = dates.split(",");
            currentDate = datesArray[datesArray.length-1];
            //console.log(currentDate);
            var datePartsArray = currentDate.split('-');
            var dateParts = {
                'day' : datePartsArray[0],
                'month' : datePartsArray[1],
                'year' : datePartsArray[2]
            };
            return dateParts[part];
        }else{
            return currentDate;
        }
    }

    return {
        loadCarouselData: loadCarouselData,
        addDate: addDate,
        removeDate: removeDate,
        writeCheckedDate : function (cur) {
            writeCheckedDate(cur);
        },
        showNewDates : function (dates) {
            showNewDates(dates);
        },
        chooseDateOnWheel : function (date) {
            chooseDateOnWheel(date);
        },
        parseCurrentDate: parseCurrentDate
    }
})();
orakul.load = (function(){

    function styleSelect(el){
        var parent = el || '';
        $(parent+" .custom-select").each(function(){
            $(this).wrap( "<span class='select-wrapper'></span>" );
            $(this).after("<span class='holder'></span>");
            ($(this).hasClass('short')) ? $(this).parent().css('width','131px') : '';
            switch($(this).attr('id')) {
                case 'Day':
                    $(this).parent().css('width','50px');
                    break;
                case 'Month':
                    $(this).parent().css('width','90px');
                    break;
                case 'Year':
                    $(this).parent().css('width','60px');
                    break;
            }

        });
    }

    function subscribeDateSelect(){
        var dayOption = '', monthOption = '', yearOption = '',
            currentYear = new Date().getFullYear();
        if(orakul.utility.cookie('dates')){
            var datesArray = orakul.utility.cookie('dates').split(","),
                currentDate = datesArray[datesArray.length-1].split("-"),
                choosenDay = +currentDate[0],
                choosenMonth = +currentDate[1],
                choosenYear = +currentDate[2];
        }else{var choosenDay = '', choosenMonth = '', choosenYear = '';}

        for(var i = 1915; i<=currentYear; i++){
            yearOption = '<option'+((i===choosenYear)?' selected':'')+' value="'+i+'">'+i+'</option>'+yearOption;
        }
        for(var i = 1; i<=31; i++){
            dayOption += '<option'+((i===choosenDay)?' selected':'')+' value="'+i+'">'+((i<10)?('0'+i):i)+'</option>';
        }

        for(var i = 1; i<=12; i++){
            monthOption += '<option'+((i===choosenMonth)?' selected':'')+' value="'+i+'">'+orakul.lang.MMMM[((i<10)?('0'+i):i)]+'</option>';
        }

        $('#subscribebox #Day').append(dayOption);
        $('#subscribebox #Month').append(monthOption);
        $('#subscribebox #Year').append(yearOption);
    }


    function MainContent(el){
        var link = $(el).attr('href'),
            url = $(el).attr('data-ajax-link'),
            ifNav = $(el).parents('.subNav').length;

        $.getJSON(url, function(data) {
            $(".mainContainer .contentOnly").html(data.content);
            $("#header .subNav").html(data.menu);
            if($('.mainContainer .periodMenu').length) {
                if(!$(el).closest('.leftCol').hasClass('datesMenu'))$(el).closest('.leftCol').addClass('datesMenu');
            }

            if(ifNav && data.signs){
                $.each(data.signs, function( index, value ) {
                    $('.sm-gorolist li a').eq(index).attr({'href': value['href'], 'data-ajax-link': value['data-ajax-link']});
                    $('.circle-container a').eq(index).attr({'href': value['href'], 'data-ajax-link': value['data-ajax-link']});
                });
            }
            document.title = data.title;
            var offset = $(".mainContainer").offset().top - $(window).scrollTop(); //console.log(offset+'---'+window.innerHeight);
            if(offset < 0) {
                $('html, body').animate({scrollTop: $(".mainContainer").offset().top}, 500);
            }
        });

        if (history && history.pushState) {
            history.pushState( null, null, link );
            orakul.socialShare.getSharesCount();
        }


    }

    return {
        MainContent: function (el) {
            MainContent(el);
        },
        styleSelect: styleSelect,
        subscribeDateSelect: subscribeDateSelect
    }
})();


orakul.AdsLoader = (function(){
    "use strict";
    var adsStore, externalPull = [];

    function initAds (store) {
        adsStore = store || {
                left:{slot1:[],slot2:[],slot3:[],slot4:[],slot5:[],slot6:[],slot7:[],slot8:[],slot9:[],slot10:[]},
                right:{slot1:[],slot2:[],slot3:[],slot4:[],slot5:[],slot6:[],slot7:[],slot8:[],slot9:[],slot10:[]},
                top:{slot1:[]}
            };
    }
    function chooseBlock(list){
        var newList = [];

        $.each(list, function( i, val ) {
            //console.log( i + ": " + val );

            if($.inArray( orakul.globals.TYPE, list[i].section ) !== -1 || list[i].section.length === 0){
                newList.push(val); //console.log(orakul.globals.TYPE+val);
            }

        });

        var returnBlock = 0;
        if(newList.length !== 0) {
            var length = newList.length,
                defPercent = Math.ceil(100 / length),
                tPercents = 0,
                rand = orakul.utility.random(100),
                blockList = $.map(newList, function (obj) {
                    obj.percent = obj.percent || defPercent;
                    tPercents += obj.percent;
                    return obj;
                }),
                percentIndex = 100 / tPercents,
                blockIndex = 0,
                l = 0,
                percentList = $.map(blockList, function (obj) {
                    return l += Math.ceil(obj.percent * percentIndex);
                });

            $.each(percentList, function (i, val) {
                blockIndex = i;
                return val < rand;
            });

            returnBlock = blockList[blockIndex];
        }else{
            returnBlock = 0;
        }
        return returnBlock;
    }
    function buildAds(){
        var partner, slot, leftAdsBlock = '', rightAdsBlock = '';
        for ( slot in adsStore.left) {
            if (adsStore.left.hasOwnProperty(slot) && document.getElementById('left-'+slot)) {
                if (adsStore.left[slot].length) {
                    partner = chooseBlock(adsStore.left[slot]);//console.log(partner);
                    if(partner != 0) {
                        //leftAdsBlock += (partner.type === 'external') ? buildExternalAds(partner) : buildInnerAds(partner);
                        $('#left-' + slot).html((partner.type === 'external') ? buildExternalAds(partner) : (partner.type === 'internal' || partner.type === 'links') ? buildInnerAds(partner, 'left') : partner.block);
                        $('#left-' + slot).addClass(((partner.size) ? ('items' + partner.size) : ''));
                        if (partner.type === 'external' && partner.counter && partner.counter !== '0') {
                            $('#left-' + slot).attr('onmousedown', "orakul.utility.click_count(" + partner.counter);
                        }
                    }
                }
            }
        }
        for ( slot in adsStore.right) {
            if (adsStore.right.hasOwnProperty(slot) && document.getElementById('right-'+slot)) {
                if (adsStore.right[slot].length) {
                    partner = chooseBlock(adsStore.right[slot]);
                    if(partner != 0) {
                        //rightAdsBlock += (partner.type === 'external') ? buildExternalAds(partner) : buildInnerAds(partner);
                        $('#right-' + slot).html((partner.type === 'external') ? buildExternalAds(partner) : (partner.type === 'internal' || partner.type === 'links') ? buildInnerAds(partner, 'right') : partner.block);
                        if (partner.type === 'external' && partner.counter && partner.counter !== '0') {
                            $('#right-' + slot).attr('onmousedown', "orakul.utility.click_count(" + partner.counter);
                        }
                    }
                }
            }
        }
        for ( slot in adsStore.top) {
            if (adsStore.top.hasOwnProperty(slot)) {
                if (adsStore.top[slot].length) {
                    partner = chooseBlock(adsStore.top[slot]);
                    if (partner != 0) {
                        var counter = partner.counter ? 'onmousedown="orakul.utility.click_count(' + partner.counter + ');"' : '';
                        $('.js-informerTop').css('background', 'url(' + partner.bgImg + ') no-repeat 0 0').html('<a target="_blank" rel="nofollow" ' + counter + ' href="' + partner.partner_url + '"></a>');
                    }
                }
            }
        }
        // $('#advLeftZone').append(leftAdsBlock);
        //$('#advRightZone').append(rightAdsBlock);
        loadExternalAds();
    }

    function loadExternalAds(){
        if(externalPull.length) {
            for (var i = 0; i < externalPull.length; i++) {
                var adsObj = externalPull[i];
                var postLoad = 0;
                if(adsObj.globals) {
                    for (var global in adsObj.globals) {
                        if (adsObj.globals.hasOwnProperty(global)){
                            if(adsObj.globals.hasOwnProperty('postpone')) {
                                if(global == 'postpone') {
                                    postponeAdLoad(adsObj);
                                    postLoad = adsObj.globals['postpone'];
                                }
                            }else{
                                window[global] = adsObj.globals[global];
                            }
                        }
                    }
                }
                if(postLoad==0){
                    orakul.utility.load(adsObj.url, (adsObj.cb ? {cb: adsObj.cb} : null));
                }

            }
        }
        function postponeAdLoad(obj){
            setTimeout(function() {
                for (var global in obj.globals) {
                    if (obj.globals.hasOwnProperty(global)) {
                        window[global] = obj.globals[global];
                    }
                }
                orakul.utility.load(obj.url,(obj.cb?{cb:obj.cb}:null));
            }, obj.globals['postpone']);
        }
    }

    function buildExternalAds(obj){//console.log('external'+obj);
        externalPull.push(obj);
        if(obj.globals) {
            for (var global in obj.globals) {
                if (obj.globals.hasOwnProperty(global)){
                    window[global] = obj.globals[global];//console.log('----'+global+'-----'+window[global]);
                }
            }
        }
        return obj.block;
    }
    function buildInnerAds(obj, slot){
        var result = '', htmlCost, htmlItems = '', items, bgImgUrl, hImg='', logoUrl='', linksBlock=(obj.type==='links')?' txtAdv':'', linksTitle = (obj.type==='links')?'<p class="hd">{partnerTitle}</p>':'<p class="slogan">'+((obj.title) ? obj.title : ((slot==='left')?orakul.lang.ad_web_left:orakul.lang.ad_web_right))+'</p>',
            ntpl = '<div class="'+linksBlock+'{class}" data-id="{Id}"{bgImgUrl}>{logoUrl}'+linksTitle+'<ul>{items}</ul></div>',
            ntplLinkItem = '<li><a class="link" href="{href}" data-counter="{CounterId}"{CounterClick} target="_blank" rel="nofollow">{text}</a></li>',
            ntplItem = '<li><a class="link" href="{href}" data-counter="{CounterId}"{CounterClick} target="_blank" rel="nofollow"><img class="img" src="{img}"/><span>{text}</span>{cost}</a></li>';

        if (obj && obj.items.length) {
            bgImgUrl = obj.bgImg?' style="background:url('+obj.bgImg+') no-repeat 0 0"':'';
            if(obj.hImg) {
                hImg = ' wImg';
                logoUrl = '<a class="logo"><img height="44" src="'+obj.hImg+'"></a>';
            }
            items = (obj.size)?(orakul.utility.shuffle(obj.items).slice(0,obj.size)):orakul.utility.shuffle(obj.items);
            var counterID = 0, maxLinkLength = (slot=='left') ? 55 : 100;
            for (var i=0;i<items.length;i++) {
                counterID = (items[i].counter && (items[i].counter!==0)) ? items[i].counter : obj.counter;
                var counterClick = (counterID)?' onmousedown="orakul.utility.click_count('+counterID+');"':'';
                htmlCost = items[i].cost ? '<div class="price">'+items[i].cost+'</div>' : '';
                var txt = (items[i].title.length<maxLinkLength)?items[i].title:(items[i].title.substring(0,maxLinkLength)+'...');
                if(obj.type === 'links') {
                    htmlItems += ntplLinkItem.replace('{href}', items[i].url).replace('{text}', items[i].title).replace('{CounterId}', counterID).replace('{CounterClick}', counterClick);
                }else{
                    htmlItems += ntplItem.replace('{href}', items[i].url).replace('{text}', txt).replace('{img}', items[i].img).replace('{cost}', htmlCost).replace('{CounterId}', counterID).replace('{CounterClick}', counterClick);
                }
            }
            result = (obj.stylespec?'<style>'+obj.stylespec+'</style>':'')+ntpl.replace('{bgImgUrl}',bgImgUrl).replace('{class}',(obj.stylespec?(' custom'+obj.id):'')+hImg).replace('{partnerlink}',(obj.partner_url?obj.partner_url:'Ñ€ÐµÐºÐ»Ð°Ð¼Ð°')).replace('{partnerTitle}',(obj.title?obj.title:'')).replace('{logoUrl}',logoUrl).replace('{Id}',obj.id).replace('{items}',htmlItems);
        }
        //console.log('result+++++'+result);
        return result;
    }
    function addAds (obj) {
        var adsObj = obj || {};
        if (adsObj.zone && adsObj.slot) {
            adsStore[adsObj.zone] = adsStore[adsObj.zone] || {};
            adsStore[adsObj.zone][adsObj.slot] = adsStore[adsObj.zone][adsObj.slot] || [];
            adsStore[adsObj.zone][adsObj.slot].push(adsObj);
        }
    }

    function testAds(obj){
        var adsObj = obj || {}, choosenSlot = '#'+adsObj.zone+'-' + adsObj.slot;
        if(adsObj.zone === 'top'){choosenSlot = '.informerTop';}
        if(adsObj.zone === 'ten_days_spread'){choosenSlot = '#tenDaysSpread';}
        $(choosenSlot).html(buildExternalAds(adsObj));
        $(choosenSlot).addClass('items'+adsObj.size);

        if (adsObj.globals) {
            for (var global in adsObj.globals) {
                if (adsObj.globals.hasOwnProperty(global)) {
                    window[global] = adsObj.globals[global];
                }
            }
        }
        orakul.utility.load(adsObj.url, (adsObj.cb ? {cb: adsObj.cb} : null));

    }

    return {
        initAds: function (obj) {
            initAds(obj);
        },
        addAds: function (obj) {
            addAds(obj);
        },
        loadAds: function () {
            buildAds();
        },
        consoleAds: function () {
            console.log(adsStore);
        },
        testAds: function(obj){
            testAds(obj);
        }
    };
})();


orakul.socialShare = (function(){

    function shareLink(){
        var link, sUrl = encodeURIComponent(window.location), sName=document.title, sDesc=document.description, img = '';
        switch($(this).data('source')) {
            case 'fb':
                link = "https://www.facebook.com/sharer/sharer.php?u="+sUrl;
                break;
            case 'vk':
                link = "http://vk.com/share.php?url="+sUrl;
                break;
            case 'tw':
                //link = 'http://twitter.com/home?status='+sUrl;
                link = 'https://twitter.com/intent/tweet?url='+sUrl+'&text='+sName;
                //link = 'http://twitter.com/share?text='+sDesc+'&via='+;
                break;
            case 'odc':
                link = 'http://ok.ru/dk?st.cmd=addShare&st.s=1&st._surl='+sUrl+'&text='+sName+'&description='+sDesc;
                break;
        }

        if(link){
            window.open(link,"","width=600, height=400");
        }
    }

    function getSharesCount(){
        var arr = $('#socialShare div[data-source]');
        var countSharesUrl, checkUrl = encodeURIComponent(window.location);
        $.each(arr, function(i, el){
            switch($(el).data('source')) {
                case 'fb':
                    countSharesUrl = "http://graph.facebook.com/?id="+checkUrl+"&format=json&callback=?";
                    $.getJSON(countSharesUrl,function(data) {
                        if(data.shares>0)$(el).find('span').html(data.shares);
                        else $(el).find('span').html('');
                    });
                    break;
                case 'vk':
                    countSharesUrl = "http://vk.com/share.php?act=count&index=1&url="+checkUrl+"&format=json&callback=?";
                    if (typeof VK === 'undefined') {
                        VK = {Share: {}};
                    }
                    VK.Share.count = function (i, count) {
                        if(count>0)$(el).find('span').html(count);
                        else $(el).find('span').html('');
                    };
                    $.getJSON(countSharesUrl);
                    break;
                case 'tw':
                /*  countSharesUrl = 'https://cdn.api.twitter.com/1/urls/count.json?url='+checkUrl+"&callback=?";
                 $.getJSON(countSharesUrl,function(data) {
                 if(data.count>0)$(el).find('span').html(data.count);
                 else $(el).find('span').html('');
                 });
                 break;*/
                case 'odc':
                    countSharesUrl = 'https://connect.ok.ru/dk?st.cmd=extLike&uid=odklcnt0&ref='+checkUrl+"&callback=?";
                    if (typeof ODKL === 'undefined') {
                        ODKL = {};
                    }
                    ODKL.updateCount = function (i, count) {
                        if(count>0)$(el).find('span').html(count);
                        else $(el).find('span').html('');
                    };
                    $.getJSON(countSharesUrl);
                    break;
            }

        });
    }

    return {
        getSharesCount: getSharesCount,
        shareLink: shareLink
    }
})();

function mod_click_count(id){
    var ladyCount=document.createElement("script");
    ladyCount.setAttribute("type","text/javascript");
    ladyCount.setAttribute("src","//orakul.ua/mod/counter.php?type=2&id="+id+"&rnd="+(new Date()).valueOf());
    document.getElementsByTagName("head")[0].appendChild(ladyCount);
}
function click_count(id) {
    var script=document.createElement("script");
    script.setAttribute("type","text/javascript");
    script.setAttribute("src","http://stat1.ukr.net/lid_new.php?linkid="+id+"&rnd="+new Date().valueOf());
    document.getElementsByTagName("head")[0].appendChild(script);
}
function GetSign(dir) {
    var items = {4:'crocdl',5:'wind',6:'night',7:'lizard',8:'snake',9:'death',10:'deer',11:'rabbit',12:'water',13:'dog',14:'monk',15:'road',16:'maize',17:'jaguar',18:'eagle',19:'griffin',0:'aroma',1:'flint',2:'storm',3:'ancient'};
    var UTC_date_from = new Date('1900/01/01');
    var UTC_date_to = new Date($("#sel-god").val()+'/'+$("#sel-mes").val()+'/'+$("#sel-den").val());
    var resultat = Math.round((UTC_date_to.getTime()-UTC_date_from.getTime())/86400000);
    window.location = dir+'/horoscope/maya/'+items[(resultat+1)%20]+'.html';
}
/*function Change(n) {document.getElementById('signChoice').className='type'+n;}
 function Change2(n) {document.getElementById('signChoice2').className='type'+n;}
 function GetCompHoro(dir){window.location=dir+'/horoscopecomp/'+$('input[name=id_comp_type]:checked').val()+'/'+$('#fs1').val()+'_'+$('#fs2').val()+'.html';}
 function GetCompHoro2(dir){window.location=dir+'/horoscopecomp/'+$('#fs0').val()+'/'+$('#fs1').val()+'_'+$('#fs2').val()+'.html';}*/
function UpdateInformer() {
    var s = $('#Size').val();
    var t = $('input[name=Type]:checked').val();
    var link = 'http://informers.ukr.net/horo/emotion/js.php?Type='+t+'&Size='+s+'&div=horo_emotion';
    $('#variants div').removeClass('selectvariant');
    $('#'+t+'_div').addClass('selectvariant');
    $('#horo_emotion').css('width',s.split('x')[0] + "px");
    $('#result').val("<!-- Ð Ð°Ð·Ð¼ÐµÑÑ‚Ð¸Ñ‚ÑŒ Ð² Ñ‚Ð¾Ð¼ Ð¼ÐµÑÑ‚Ðµ Ð³Ð´Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼ÐµÑ€ -->\n<div id=\"horo_emotion\">Loading...</div>\n\n<!-- Ð Ð°Ð·Ð¼ÐµÑÑ‚Ð¸Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÐ´ Ñ‚ÐµÐ³Ð¾Ð¼ </body> -->\n<scr"+"ipt type=\"text/javascript\" src=\""+link+"\" charset=\"windows-1251\"></scr" + "ipt>");
    $('#horoscript').html($('<script>').attr({src:(link+'&nocss=1&rnd='+(new Date()).getTime()),charset:'windows-1251'}));
}
function addBookmark(title,url,obj){
    if (!url) {url=location.href;}
    if (!title) {title = document.title;}
    if ((typeof window.sidebar == "object") &&
        (typeof window.sidebar.addPanel == "function")) { //Gecko
        window.sidebar.addPanel(title, url, "");
    } else if (document.all) { //IE
        window.external.AddFavorite(url, title);
    } else if (window.opera && document.createElement) { //opera
        obj.setAttribute('rel', 'sidebar');
        obj.setAttribute('href', url);
        obj.setAttribute('title', title);
    } else { // safari, chrome
        alert("Ð§Ñ‚Ð¾ Ð±Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² Ð·Ð°ÐºÐ»Ð°Ð´ÐºÐ¸\n" +
            "ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ ctrl+D");
        return false;
    }
    return true;
}
function slideItem(whatSlide, itemSlide){
    var elem = document.getElementById(whatSlide);
    var slideSize = elem.children[0].offsetWidth +20;
    if (itemSlide > 0) {
        if (-parseInt(elem.style.marginLeft) < slideSize * (elem.children.length-itemSlide)){
            elem.style.marginLeft = parseInt(elem.style.marginLeft) - itemSlide*slideSize + 'px';
        } else {
            elem.style.marginLeft = '0px';
        }
    } else {
        if (parseInt(elem.style.marginLeft) !=0){
            elem.style.marginLeft = parseInt(elem.style.marginLeft) - itemSlide*slideSize + 'px';
        } else {
            elem.style.marginLeft = -slideSize * (elem.children.length+itemSlide) + 'px';
        }
    }
}
$(document).ready(function(){
    /*if($.browser.msie&&$.browser.version<7){
     $('.advBlock .item a span img').each(function(){
     $(this).css('margin-top',(108-$(this).height())/2).parent().css('display','block');
     })
     }*/

    $('horo').on('mousewheel', function(e) {
        if(e.originalEvent.wheelDelta / 120 > 0) {
            console.log('up');
            //orakul.horoscopeRotation.changeHoro();
        } else {
            console.log('down');
        }
    });

});
$(document).ready(function(){

    // ie8 bg hack
    //if(isIE() && isIE()<9){$('body:after, body:before').css('z-index','-20');}

    orakul.load.subscribeDateSelect();

//console.log(orakul.utility.getURLParameter('code'));

//console.log('------------'+orakul.utility.getURLParameter('code')+'==='+orakul.utility.getURLParameter('msg'));
    var msg = orakul.utility.getURLParameter("msg"), err=orakul.utility.getURLParameter("err"),
        print_msg = (msg)? msg : (err) ? err : '', code = orakul.utility.getURLParameter("code");
    var ajax_link = '/horo-ajax/subscriber/';
    if (code && msg) {
        //console.log(ajax_link + msg + '/' + code);
        $.get(ajax_link + msg + '/' + code+'/', function (data) {
            $('#subscribebox').html(data);
        }).done(function () {
            orakul.load.subscribeDateSelect();
            $('#Subscriber #Day').val((orakul.subscribe.day) ? orakul.subscribe.day : '0');
            $('#Subscriber #Month').val((orakul.subscribe.month) ? orakul.subscribe.month : '0');
            $('#Subscriber #Year').val((orakul.subscribe.year) ? orakul.subscribe.year : '0');
            orakul.load.styleSelect('#Subscriber');
            $("#Subscriber .custom-select").change(function(){
                var selectedOption = $(this).find(":selected").text();
                $(this).next(".holder").text(selectedOption);
            }).trigger('change');
        });

        ($("#subscribebox").css('display')=='none') ? $('#subscribe-toggle').addClass('active') : $('#subscribe-toggle').removeClass('active');
        $("#subscribebox").animate({width: "toggle",
            height: "toggle"}, 500);
    }

    var currentDate = new Date(), curDay = currentDate.getDate()-1, curMonth = currentDate.getMonth(), curYear = currentDate.getFullYear();
    //console.log('curDay-'+curDay+'=curMonth-'+curMonth+'curYear-'+curYear);

    /* $(".horo-types li a").on({
     mouseenter: function () {
     var p = $(this).position();
     $('.horo-types .active').css({'visibility':'visible', 'left': p.left-30})
     },
     mouseleave: function () {
     $('.horo-types .active').css('visibility','hidden');
     }
     });*/

    $('#socialShare div').on('click', orakul.socialShare.shareLink );

    $( ".dateBlockVis" ).on({
        click: function(e) {
            customSlideToggle('.chooseDateWrap');//console.log($('.dateBlockVis .arr-flip').css( "transform" ));
            if (!$('.dateBlockVis .arr-flip').hasClass("rotated")){
                $('.dateBlockVis .arr-flip').addClass("rotated");
            } else {
                $('.dateBlockVis .arr-flip').removeClass("rotated");
            }
        },
        mouseenter:function () {

        },
        mouseleave:function () {

        }
    });

    function customSlideToggle(el)
    {   var e = $(el);//console.log(el+e);
        var show = e.hasClass('hidden-dc');
        if (show) {
            e.hide();
            e.removeClass('hidden-dc');
            e.slideDown('slow');
        }
        else
        {
            e.slideUp('slow', function() {
                e.addClass('hidden-dc');
                e.show();
            });
        }
    }

    $('.chooseDateWrap .close').on('click', function(event) {

        var self = $(this);
        $(self).parent().slideToggle('fast');
    });

    $('.more-box').on('click', 'ul li', function(){
        var parentBox = '.choose-sign-'+$(this).parent().parent().attr('id').replace('-box','');
        var owl = $(parentBox).data('owlCarousel');
        $(this).parent().parent().slideToggle('fast');
        var cont = $(this).html();
        var cont_num = $(parentBox).find('.owl-item div:contains('+cont+')').parent(); //console.log(cont_num.html());
        var index = $(parentBox+" .owl-item").index(cont_num);
        owl.current(index);
        owl.refresh();

    });

    $('.com-form').on('change load', '#fs0', function(){
        var str = this.value;
        var firstSign = str.substr(0, str.indexOf('_'));
        var secondSign = str.substr(str.indexOf('_')+1), form = $(this).closest('form');
        form.find('#leftOpt label span').css('display','none');
        form.find('#leftOpt label span.opt-'+firstSign).css('display','block');
        form.find('#rightOpt label span').css('display','none');
        form.find('#rightOpt label span.opt2-'+secondSign).css('display','block');

    });

    $('.com-form').on('submit', function(e){
        e.preventDefault();
        var validated = validateForm(this);
        if(validated) {
            // $(this).attr('action', orakul.globals.SITE_URI+'/horoscopecomp/'+$(this).find('#fs0').val()+'/'+$(this).find('#fs1').val()+'_'+$(this).find('#fs2').val()+'.html )
            // $(this).submit();

            window.location = orakul.globals.SITE_URI + '/horoscopecomp/' + $(this).find('#fs0').val() + '/' + $(this).find('#fs1').val() + '_' + $(this).find('#fs2').val() + '.html';
        }else{
            $(this).find('.errorMessage').html('<span>'+orakul.lang.compat_select_signs+'</span>');
            return false;
        }
    });

 
    /* ------------ custom styling ------------- */
    orakul.load.styleSelect();

    $(".custom-select").change(function(){

        var selectedOption = $(this).find(":selected").text();

        $(this).next(".holder").text(selectedOption);

    }).trigger('change');

    $("#wrapper").on('focus blur', '.custom-select', function(e){
        if( e.type == 'focusin' )
            $(this).closest('.s-style').addClass('highlightField');
        else
            $(this).closest('.s-style').removeClass('highlightField');
    });

    $('#choosenDates').on('click', 'a', function(e){
        e.preventDefault();
        var currentDate =orakul.dateChooser.addDate($(this).attr('id')),url=$("#choosenDates").data('answer')+currentDate + '/';
        $.get(url, function(data){//console.log(data);
            window.location = data;
        });
    });

    $('#wrapper').on('click', '.removeDate', function(){
        //e.preventDefault();
        orakul.dateChooser.removeDate($(this).attr('id'));
    });

    $('#wrapper').on('mouseover', '.date-wrap', function(){
        //e.preventDefault();
        $(this).addClass('over');
        $(this).find('span').css('visibility','visible');
    });
    $('#wrapper').on('mouseout', '.date-wrap', function(){
        //e.preventDefault();
        $(this).removeClass('over');
        $(this).find('span').css('visibility','hidden');
    });


    $('#saveDate').on('click', function(){
        var currentDate = orakul.dateChooser.addDate(''),url=$("#choosenDates").data('answer')+currentDate + '/';
        $.get(url, function(data){//alert(data);
            // window.location = data;
        }).done(function(data){
            window.location = data;
        });

    });

    $('#wrapper').on('mouseenter mouseleave','.tooltip',function(e){
        if(e.type==='mouseenter') {
            e.preventDefault();
            var self = $(this), ObjOffSet = self.offset(), additionalTop=(self.closest("#sgoro").length)?60:50, additionalLeft=(self.closest("#sgoro").length)?3:0;
            $('#tooltipS').css({
                'top': ( ObjOffSet.top + additionalTop),
                'left': ( ObjOffSet.left + self.outerWidth()/2 - additionalLeft)
            }).show().find('.tooltip-tip-content').html(self.attr('data-tooltip'));
        } else if(e.type==='mouseleave') {
            $('#tooltipS').hide().find('.tooltip-tip-content').html('');
        }
    });
    $('#wrapper').on('mousedown','.partners .link', function(){
        if($(this).data('counter') !== 0)orakul.utility.click_count($(this).data('counter'));
    });

    $("#subscribe-toggle").on('click', function(e) {
        e.preventDefault();
        ($("#subscribebox").css('display')=='none') ? $('#subscribe-toggle').addClass('active') : $('#subscribe-toggle').removeClass('active');
        $("#subscribebox").animate({width: "toggle",
            height: "toggle"}, 500);
        return false;
    });

    $("#subscribebox").on('click', '#closeSubForm', function(e) {
        e.preventDefault();
        ($("#subscribebox").css('display')=='none') ? $('#subscribe-toggle').addClass('active') : $('#subscribe-toggle').removeClass('active');
        $("#subscribebox").animate({width: "toggle",
            height: "toggle"}, 500);
        return false;
    });

    $("input[type='text']").each( function() {
        var el = $(this);
        if (!('placeholder' in el)) {
            el.focus(function () {
                if (el.val() === el.attr('placeholder')) {
                    el.val('');
                }
            }).blur(function () {
                if (el.val() === '') {
                    el.val(el.attr('placeholder'));
                }
            }).blur();
        }
    });


    function validateForm(form){
        var validated = true,
            re = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,20}(?:\.[a-z]{2})?)$/i,
            //rl = /^[a-zA-ZÐ°-ÑÐ-Ð¯Ñ‘ÐÑ–Ð†Ð‡Ñ—'\-\s ]+$/,
            rl = /^[a-zA-ZÐ°-ÑÐ-Ð¯Ñ‘ÐÑ–Ð†Ð‡Ñ—Ð„Ñ”]{1,}[a-zA-ZÐ°-ÑÐ-Ð¯Ñ‘ÐÑ–Ð†Ð‡Ñ—Ð„Ñ”'\.\-\s]{0,}[a-zA-ZÐ°-ÑÐ-Ð¯Ñ‘ÐÑ–Ð†Ð‡Ñ—Ð„Ñ”]{0,}$/,
            rd = /\d/;

        $(form).find(".required input[type='text']").each(function(){
            if($(this).attr('placeholder') && $(this).attr('placeholder')==$(this).val())$(this).val('');

            if (($.trim($(this).val()).length == 0) && ($(this).attr('id')!='nkv')){
                $(this).addClass("highlight");
                validated = false;
            }
            else{
                if($(this).attr('id').indexOf('email') > -1){
                    if(re.test($(this).val())){
                        $(this).removeClass("highlight");
                    } else{
                        $(this).addClass("highlight");
                        validated = false;
                    }
                } else if($(this).hasClass('letters-only')){
                    if(rl.test($(this).val())){
                        $(this).removeClass("highlight");
                    } else{
                        $(form).find(".errorMessage").html(orakul.lang.name_not_valid);
                        $(this).addClass("highlight");
                        validated = false;
                    }
                } else if($(this).hasClass('numInput')){
                    if((rd.test($(this).val()) || ($(this).attr('id')=='nkv' && $.trim($(this).val()).length == 0)) && $(this).val()!='0'){
                        $(this).removeClass("highlight");
                    } else{
                        $(this).addClass("highlight");
                        validated = false;
                    }
                }else {
                    $(this).removeClass("highlight");
                }
            }
        });

        $(form).find(".required textarea").each(function(){
            if($(this).attr('placeholder') && $(this).attr('placeholder')==$(this).val())$(this).val('');

            if ($(this).val().length == 0){
                $(this).addClass("highlight");
                validated = false;
            }
            else{
                $(this).removeClass("highlight");
            }
        });


        $(form).find(".required select").each(function() {
            if ($(this).val() == 0){
                $(this).parent().parent().addClass("highlight");
                validated = false;
            } else {$(this).parent().parent().removeClass("highlight");}
        });

        var isSelected = true;
        $(form).find(".required input[type='radio']").each(function(){
            if($(this).is(':checked')){
                isSelected = true;
                $(this).closest('.field').find(".required input[type='radio']").removeClass("highlight");
                return false;
            }else{
                isSelected = false;
                $(this).closest('.field').find(".required input[type='radio']").addClass("highlight");
            }
        });

        if(!isSelected)validated=false;

        return validated;
    }

    $('#subscribebox').on('click', '#resetForm', function(e){
        e.preventDefault();
        $("#subscribebox .errorMessage").html('');
        $(this).closest('form').trigger('reset');
        $(this).closest('form').find("input[type=text], textarea, .select-wrapper").removeClass("highlight");
        $(this).closest('form').find("input[type=text], textarea").each(function(){
            var default_value = ($(this).attr('placeholder'))?$(this).attr('placeholder'):'';
            $(this).val(default_value);
        });
        $(this).closest('form').find("select :selected").attr("selected", false);
        $(this).closest('form').find("input[type=radio]").attr("checked", false);
        if($(this).closest('form').find("#sexF"))$(this).closest('form').find("#sexF").prop("checked", true);
        $(this).closest('form').find("select option:first-child").attr("selected", true);
        $('.select-wrapper .holder').each(function() {
            $(this).text($(this).parent().find('select').find(":selected").text());
        });
    });

    $("#subscribebox").on('submit', '#Subscriber', function(e) {
        var validated = validateForm(this);
        if(validated){
            var urlSubmit = $(this).attr('action');

            $.ajax({
                type: "POST",
                url: urlSubmit,
                data: $(this).serialize(), // serializes the form's elements.
                dataType: 'html',
                success: function(data)
                {
                    $('#subscribebox').html(data);
                }
            }).done(function(){
                orakul.load.subscribeDateSelect();
                $('#Subscriber #Day').val((orakul.subscribe.day) ? orakul.subscribe.day : '0');
                $('#Subscriber #Month').val((orakul.subscribe.month) ? orakul.subscribe.month : '0');
                $('#Subscriber #Year').val((orakul.subscribe.year) ? orakul.subscribe.year : '0');
                orakul.load.styleSelect('#Subscriber');
                $("#Subscriber .custom-select").change(function(){
                    var selectedOption = $(this).find(":selected").text();
                    $(this).next(".holder").text(selectedOption);
                }).trigger('change');
            });
        }else{

            $('#subscribebox .errorMessage').html(orakul.lang.fill_all_fields);
        }

        return false;
    });

    $('#n2, #n3').on('submit', function(e) {
        var validated = validateForm(this);
        if(validated){
            return;
        }else {
            if($(this).attr('id')==='n3')$(this).find(".errorMessage").html(orakul.lang.num_not_valid);
            else $(this).find(".errorMessage").html(orakul.lang.name_not_valid);
            return false;
        }
    });

    if(!(isIE() == 8)) {
        $('#wrapper').on('click', '.sm-gorolist li a, .circle-container a, .subNav a', function (e) {

            if ($(this).parents('.subNav').length == 0) {
                e.preventDefault();
                var link = $(this).attr('href'),
                    url = $(this).attr('data-ajax-link'), actSignUrlArray = url.split('/'),
                    actSign = $(this).attr('data-sign'),
                    actType = $('.circle-container').data('type'),
                    degree = ($(this).parent().hasClass('circle-container')) ? ($(".circle-container a").index($(this))) * 30 : $(".sm-gorolist li a").index($(this)) * 30,
                    elementsCount = $('.sm-gorolist').children().length,
                    signsCount = 12;

                // if($(this).parent().parent().hasClass('sm-gorolist')) { // for signs table
                $('.sm-gorolist').find('a').each(function () {
                    if ($(this).hasClass('act')) {
                        $(this).removeClass('act');
                        //return false;
                    }
                    if ($(this).hasClass(actSign)) {
                        $(this).addClass('act');
                    }
                });

                //  if ($('.sm-gorolist'))$('.sm-gorolist').find('a').hasClass(actSign).addClass('act');
                // }else{         // for circle chooser
                var actSignContainer = $('.circle-container').find('div#activeSignDiv');
                var actImg = $('.circle-container').find('.center span img');
                if (elementsCount === signsCount) {
                    actSignContainer.attr('class', 'rotate' + degree + ' sign' + actSign);
                }
                actImg.attr('src', orakul.globals.SITE_URI + '/img/new/signs/' + actType + '/' + actSign + '.png');
                //  }
                orakul.load.MainContent(this);
            }else{
                if($(this).attr('data-ajax-link')){
                    e.preventDefault();
                    orakul.load.MainContent(this);
                }
            }

        });
    }

    $('#wrapper').on('submit', '.js-feedback-form', function(e){
        e.preventDefault();
        var validated = validateForm(this);
        if(validated) {
            var postData = {
                'Contact[email]': $('.js-feedback-mail').val(),
                'Contact[subject]': $('.js-feedback-theme').val(),
                'Contact[question]': $('.js-feedback-text').val(),
                'Contact[prevent_field]': $(this).data('key'),
                'Contact[pageUri]': document.location.href,
                'Contact[screen_size]': screen.width+'*'+screen.height,
                '_csrf' : $('.js-feedback-csrf').val(),
            };
            if ($('#blockDays').data('cityId')) {
                postData.cityId = $('#blockDays').data('cityId')
            }
            $.ajax({
                type: "POST",
                url: '/tiny-ajax/contact/',
                data: postData,
                dataType: 'html',
                success: function (data) {
                    //  console.log(data);
                    $('.js-feedback-wrapper').html(data);
                }
            });
        }else{
            $(this).find('.errorMessage').html('<span>'+orakul.lang.feedback_check_fields+'</span>');
        }
        return false;
    });

    $('#wrapper').on('click', '#feedbackform', function(){
        $('#wrapper').append('<div class="js-feedback-wrapper"></div>');
        $('.js-feedback-wrapper').load('/tiny-ajax/contact/',function() {
            orakul.load.styleSelect('.js-feedback-form');
            $(".js-feedback-form .custom-select").change(function(){
                var selectedOption = $(this).find(":selected").text();
                $(this).next(".holder").text(selectedOption);
            }).trigger('change');
            var $feedbackForm = $('.js-feedback-form');
            $('#wrapper').on('click', '.js-feedback-close', function() {
                $('.js-feedback-wrapper').remove();
            });
        });
    });

    // ended document.ready
});

if (navigator.userAgent.indexOf('Opera Mini') > -1){$('#wrapper').addClass('operaMini');}

if(document.getElementById('choosenDates')) {
    if (orakul.utility.cookie('dates')) {
        $("#choosenDates").css('height', '30px');
        orakul.dateChooser.showNewDates(orakul.utility.cookie('dates'));
    }
}
function isIE () {
    var myNav = navigator.userAgent.toLowerCase();
    return (myNav.indexOf('msie') != -1) ? parseInt(myNav.split('msie')[1]) : false;
}

function preloadImage(url)
{
    var img=new Image();
    img.src=url;
}

$(window).on('load', function(){

    orakul.dateChooser.loadCarouselData();
    var currentDate = new Date(), curDay = currentDate.getDate()-1, curMonth = currentDate.getMonth(), datechoosercurYear = $('.choose-sign-year div').length-1;
    $(".owl-carousel").each( function() {
        var self = this;

        $(self).on('initialized.owl.carousel', function () {

            if($(self).hasClass('choose-sign-day')) {
                //setTimeout(function(){$(".chooseDateWrap").css('display', 'none');}, 2000);
                //customSlideToggle('.chooseDateWrap');
            }
        });

        $(self).owlCarousel({
            loop: $(self).data('type')==="year"? true: false,
            nav: false,
            //margin: 11,
            pullDrag:false,
            autoWidth: true,
            elementWidth:$(self).data('type')==="year" ? 40 : false,
            center: true,
            callbacks: true,
            mouseDraggable:false,
            /*items: 5,*/
            startPosition:$(self).data('type')==="year" ? datechoosercurYear : $(self).data('type')==="month" ? curMonth : curDay
        });
        $(self).on('mousewheel', '.owl-stage', function (e) {
            if (e.deltaY > 0) {
                $(self).trigger('next.owl');
            } else {
                $(self).trigger('prev.owl');
            }
            e.preventDefault();
        });
        $(self).on('drag.owl.carousel', function (el) {
            $('body').addClass('no-select');
            var p = $(this).position();
            $('.chooseBirthDate .arrows').css({'display':'block','top': p.top});
        });
        $(self).on('changed.owl.carousel', function (el) {
            $('body').removeClass('no-select');
            $('.chooseBirthDate .arrows').css('display','none');
            var current = el.item.index;
        });
    });

    $(".owl-carousel").on('click', 'div.owl-item', function (el) {/*console.log('---');*/var self = $(this).closest('.owl-carousel'); $('.more-box').css('display','none');var id = $(self).data('toggle-id'), active = $(self).find('.owl-stage .center div').html();$('#'+id).slideToggle('fast');$('#'+id+' ul li').attr('class','');$('#'+id+' ul li:contains('+active+')').addClass('active');
    });

    $(".owl-carousel").on({
        mouseenter: function () {
            var p = $(this).position();
            $('.chooseBirthDate .arrows').css({'display':'block','top': p.top});
        },
        mouseleave: function () {
            $('.chooseBirthDate .arrows').css('display','none');
        }
    });

    orakul.socialShare.getSharesCount();
});
